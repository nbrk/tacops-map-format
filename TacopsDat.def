DEFINITION MODULE TacopsDat ;

(*
    Title      : TacopsDat
    Author     : Nikolay A. Burkov
    System     : GNU Modula-2
    Date       : Tue Feb 20 22:26:18 2024
    Revision   : $Version$
    Description: TacOps map files support.
*)

TYPE
   Map;
   Terrain = RECORD
                type : (clear, nogoWheeled, nogoVehicles, nogoEveryone,
                        rough1, rough2, rough3, rough4, water);
                flags : SET OF (elevation, road, woods, town, losBlock);
             END;

(*
   Load - Loads map from the .dat file
*)

PROCEDURE Load (path : ARRAY OF CHAR; VAR map : Map) : BOOLEAN ;

(*
   Unload - Unloads all map data from memory
*)

PROCEDURE Unload (VAR map : Map) ;

(*
   GetQuadrantCount - Return terrain grid dimensions
*)

PROCEDURE GetQuadrantCount (map : Map; VAR numCols, numRows : CARDINAL);

(*
   GetPointCount - Return map width and height
*)

PROCEDURE GetPointCount (map : Map; VAR width, height : CARDINAL) ;

(*
   GetIdentString - Return map's ident string (8 char, null-terminated)
*)

PROCEDURE GetIdentString (map : Map; VAR str : ARRAY OF CHAR) ;


(*
   GetTerrain - Read one value of the terrain matrix
*)

PROCEDURE GetTerrain (map : Map; column, row : CARDINAL; VAR terrain : Terrain) ;


END TacopsDat.
